{% extends 'base.html' %}

{% load static %}

{% block content %}

<aside class="main-sidebar hidden-print ">
      <section class="sidebar" id="sidebar-scroll">
         <!-- Sidebar Menu-->
         <ul class="sidebar-menu">
            <li class="active treeview">
               <a class="waves-effect waves-dark" >
                  <i class="icon-speedometer"></i><span> Dashboard</span>
               </a>                
            </li>
             
            <li class="treeview"><a class="waves-effect waves-dark" href="#!"><i class="icon-book-open"></i><span> Customer Reports</span><i class="icon-arrow-down"></i></a>
               <ul class="treeview-menu">
                  <li><a class="waves-effect waves-dark" href="{% url 'customerform' %}"><i class="icon-arrow-right"></i> Customer Register</a></li>
                  
                  <li><a class="waves-effect waves-dark" href="{% url 'customer_table' %}"><i class="icon-arrow-right"></i>  Customer Data</a></li>

               </ul>
            </li>

            <li class="treeview"><a class="waves-effect waves-dark" href="#!"><i class="icon-book-open"></i><span> Report Payment</span><i class="icon-arrow-down"></i></a>
               <ul class="treeview-menu">
                  <li><a class="waves-effect waves-dark" href="{% url 'earningCustomer' %}"><i class="icon-arrow-right"></i> Total Earning</a></li>
                  
                  <li><a class="waves-effect waves-dark" href="{% url 'registerearning' %}"><i class="icon-arrow-right"></i>  Register Earning</a></li>

               </ul>
            </li>

            <li class="treeview"><a class="waves-effect waves-dark" href="#!"><i class="icon-book-open"></i><span> Categories</span><i class="icon-arrow-down"></i></a>
               <ul class="treeview-menu">
                  <li><a class="waves-effect waves-dark" href="{% url 'category_register' %}"><i class="icon-arrow-right"></i> Category Register</a></li>
                  
                  <li><a class="waves-effect waves-dark" href="{% url 'category_show' %}"><i class="icon-arrow-right"></i>  Categories Data</a></li>
               </ul>
            </li>

            
            <li class="treeview">
               <a class="waves-effect waves-dark" href="{% url 'customer_table_data_json' %}">
                  <i class="icon-speedometer"></i><span> JSON Data</span>
               </a>                
            </li>

            <li class="treeview">
               <a class="waves-effect waves-dark" href="{% url 'socical_media' %}">
                  <i class="icon-speedometer"></i><span> Social Media </span>
               </a>                
            </li>


            {% comment %} <li class="treeview">
               <a class="waves-effect waves-dark" href="{% url 'userdata' %}">
                  <i class="icon-speedometer"></i><span> User </span>
               </a>                
            </li> {% endcomment %}
            

            {% comment %} <li class="treeview">
               <a class="waves-effect waves-dark" href="#">
                  <i class="icon-user"></i><span> Profile</span>
               </a>                
            </li> {% endcomment %}
             
         </ul>
      </section>
   </aside>
  
   <div class="content-wrapper">
      <!-- Container-fluid starts -->
      <!-- Main content starts -->
      <div class="container-fluid">
         <div class="row">
            <div class="main-header">
               <h4>Dashboard</h4>
            </div>
         </div>
         <!-- 4-blocks row start -->
         <div class="row dashboard-header">
            <div class="col-lg-3 col-md-6">
               <div class="card dashboard-product">
                  <span>Register Data</span>
                  <h2 class="dashboard-total-products"> {{data}} </h2>
                  <span class="label label-warning"> <a href="{% url 'user_data' %}"> View</a></span> 
                  <div class="side-box">
                     <i class="ti-user text-warning-color"></i>
                  </div>
               </div>
            </div>
            <div class="col-lg-3 col-md-6">
               <div class="card dashboard-product">
                  <span>Customer Data</span> 
                  <h2 class="dashboard-total-products"> {{data1}} </h2>
                  <span class="label label-primary"> <a href="{% url 'customer_table' %}"> View</a></span> 
                  <div class="side-box ">
                    <i class="ti-user text-primary-color"></i> 
                  </div>
               </div>
            </div>
            <div class="col-lg-3 col-md-6">
               <div class="card dashboard-product">
                  <span>Total Earning</span>
                  <h2 class="dashboard-total-products">$<span> {{total}} </span></h2>
                  <span class="label label-success"><a href="{% url 'earningCustomer' %}"> View</a></span>
                  <div class="side-box">
                     <i class="ti-direction-alt text-success-color"></i>
                  </div>
               </div>
            </div>
            <div class="col-lg-3 col-md-6">
               <div class="card dashboard-product">
                  <span>Social Data</span>
                  <h2 class="dashboard-total-products">$<span> {{data3}} </span></h2>
                  <span class="label label-danger"> <a href="{% url 'socical_media' %}"> View</a> </span>
                  <div class="side-box">
                     <i class="ti-rocket text-danger-color"></i>
                  </div>
               </div>
            </div>
         </div>
         <!-- 4-blocks row end -->

         <!-- 1-3-block row start -->
         <div class="row">
            <div class="col-lg-4">
               <div class="card">
                  <div class="user-block-2">
                     {% comment %} <img class="img-fluid" src="{% static 'assets/images/widget/user-1.png' %}" alt="user-header"> {% endcomment %}
                     <h5> Chintan Suthar</h5>
                     <h6>Software Engineer</h6>
                  </div>
                  <div class="card-block">
                     <div class="user-block-2-activities">
                        <div class="user-block-2-active">
                           <i class="icofont icofont-clock-time"></i> Recent Activities
                           <label class="label label-primary">480</label>
                        </div>
                     </div>
                     <div class="user-block-2-activities">
                        <div class="user-block-2-active">
                           <i class="icofont icofont-users"></i> Current Employees
                           <label class="label label-primary">390</label>
                        </div>
                     </div>

                     <div class="user-block-2-activities">
                        <div class="user-block-2-active">
                           <i class="icofont icofont-ui-user"></i> Following
                           <label class="label label-primary">485</label>
                        </div>

                     </div>
                     <div class="user-block-2-activities">
                        <div class="user-block-2-active">
                           <i class="icofont icofont-picture"></i> Pictures
                           <label class="label label-primary">506</label>
                        </div>
                     </div>
                     <div class="text-center">
                        <button type="button" class="btn btn-warning waves-effect waves-light text-uppercase m-r-30">
                                 Follows
                             </button>
                        <button type="button" class="btn btn-primary waves-effect waves-light text-uppercase">
                                 Message
                             </button>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-lg-8">
               <div class="card">
                  <div class="card-header">
                     <h5 class="card-header-text">Bar chart</h5>
                  </div>
                  <div class="card-block">
                     <div id="barchart" style="min-width: 250px; height: auto; margin: 0 auto"></div>
                  </div>
               </div>
            </div>
            
         </div>
         <!-- 1-3-block row end -->

         <!-- 2-1 block start -->
         <div class="row">
            <div class="col-xl-6 col-lg-12">
               <div class="card">
                  <div class="card-header">
                     <h5 class="card-header-text">Bar chart</h5>
                  </div>
                  <div class="card-block">
                     {% comment %} <div id="piechart" style="min-width: 250px; height: 460px; margin: 0 auto"></div> {% endcomment %}
                     {% if chart %}
                     <img src="data:image/png;base64, {{chart|safe}}">
                     {% endif %}
                  </div>
               </div>
            </div>

            <div class="col-xl-6 col-lg-12">
               <div class="card">
                  <div class="card-header">
                     <h5 class="card-header-text">Bar Chart</h5>
                  </div>
                  <div>
                     <canvas id="myChart"></canvas>
                  </div>
                   
                   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                   
                   <script>
                     const ctx = document.getElementById('myChart');
                   
                     new Chart(ctx, {
                       type: 'bar',
                       data: {
                         labels: [{% for x in data2 %} '{{x.fname}}', {% endfor %}],
                         datasets: [{
                           label: '# of Votes',
                           data: [{% for x in data2 %} {{x.price}}, {% endfor %}],
                           borderWidth: 1
                         }]
                       },
                       options: {
                         scales: {
                           y: {
                             beginAtZero: true
                           }
                         }
                       }
                     });
                   </script>
                   
               </div>
            </div>
            
         </div>
         <!-- 2-1 block end -->
      </div>
      <!-- Main content ends -->
      <!-- Container-fluid ends -->
      <div class="fixed-button">
         <a href="#!" class="btn btn-md btn-primary">
           <i class="fa fa-shopping-cart" aria-hidden="true"></i> Upgrade To Pro
         </a>
      </div>
   </div>
</div>

{% endblock %}

<script>
   var $window = $(window);
   var nav = $('.fixed-button');
   $window.scroll(function(){
       if ($window.scrollTop() >= 200) {
          nav.addClass('active');
       }
       else {
          nav.removeClass('active');
       }
   });


   $(document).ready(function() {
      {% for msg in messages %}
      var messageType = "{{ msg.tags }}";
      var messageText = "{{ msg }}";

      toastr.options = {
          "closeButton": false,
          "debug": false,
          "newestOnTop": false,
          "progressBar": false,
          "positionClass": "toast-bottom-right",
          "preventDuplicates": false,
          "onclick": null,
          "showDuration": "300",
          "timeOut": "5000",
          "extendedTimeOut": "1000",
          "showEasing": "swing",
          "showMethod": "fadeIn",
          "hideMethod": "fadeOut"
        }

      if (messageType === 'success') {
          toastr.success(messageText);
      } else if (messageType === 'error') {
          toastr.error(messageText);
      } else if (messageType === 'info') {
          toastr.info(messageText);
      } else {
          toastr.warning(messageText);
      }
      {% endfor %}
  });
   </script>